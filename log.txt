[2022-03-20T20:21:47Z INFO  ats_monitoring] starting up ats-monitoring app
[2022-03-20T20:21:47Z INFO  ats_monitoring] please wait for connecting to plc
[2022-03-20T20:21:47Z DEBUG tokio_postgres::simple_query] executing statement batch: alter database postgres set default_transaction_isolation to serializable
[2022-03-20T20:21:47Z DEBUG tokio_postgres::simple_query] executing statement batch: 
                    CREATE TABLE IF NOT EXISTS avr_control_insert (
                        mains_power_supply int NOT NULL,
                        start_generator int NOT NULL,
                        generator_faulty int NOT NULL,
                        generator_work int NOT NULL,
                        connection int NOT NULL,
                        mark timestamptz default current_timestamp
                    )
                
[2022-03-20T20:21:47Z INFO  postgres::config] NOTICE: relation "avr_control_insert" already exists, skipping
[2022-03-20T20:21:47Z DEBUG tokio_postgres::simple_query] executing statement batch: 
                    CREATE TABLE IF NOT EXISTS журнал_работы_приложения (
                        событие text NOT NULL,
                        время_и_дата timestamp default current_timestamp
                    )
                
[2022-03-20T20:21:47Z INFO  postgres::config] NOTICE: relation "журнал_работы_приложения" already exists, skipping
[2022-03-20T20:21:47Z DEBUG tokio_postgres::simple_query] executing statement batch: 
                    CREATE TABLE IF NOT EXISTS зимний_сад (
                        фитоосвещение_1 int NOT NULL,
                        фитоосвещение_2 int NOT NULL,
                        фитоосвещение_3 int NOT NULL,
                        фитоосвещение_4 int NOT NULL,
                        вентилятор int NOT NULL,
                        автополив_1 int NOT NULL,
                        автополив_2 int NOT NULL,
                        автополив_3 int NOT NULL,
                        температура int NOT NULL,
                        влажность int NOT NULL,
                        освещенность_в_помещении int NOT NULL,
                        освещенность_на_улице int NOT NULL,
                        время_и_дата timestamp default current_timestamp
                    )
                
[2022-03-20T20:21:47Z INFO  postgres::config] NOTICE: relation "зимний_сад" already exists, skipping
[2022-03-20T20:21:47Z DEBUG tokio_postgres::simple_query] executing statement batch: 
                    CREATE TABLE IF NOT EXISTS нагрузка_на_генератор (
                        нагрузка int NOT NULL,
                        время_и_дата timestamp default current_timestamp
                    
                    )
                
[2022-03-20T20:21:47Z INFO  postgres::config] NOTICE: relation "нагрузка_на_генератор" already exists, skipping
[2022-03-20T20:21:47Z DEBUG tokio_postgres::simple_query] executing statement batch: 
                    CREATE TABLE IF NOT EXISTS события_авр (
                        событие text NOT NULL,
                        время_и_дата timestamp default current_timestamp
                    )
                
[2022-03-20T20:21:47Z INFO  postgres::config] NOTICE: relation "события_авр" already exists, skipping
[2022-03-20T20:21:47Z INFO  ats_monitoring] starting up write_data_to_ram_spawn
[2022-03-20T20:21:47Z INFO  ats_monitoring] starting up modbus_ats_spawn
[2022-03-20T20:21:47Z INFO  ats_monitoring] starting up power_supply_monitoring_spawn
[2022-03-20T20:21:47Z INFO  ats_monitoring] starting up modbus_winter_garden_spawn
[2022-03-20T20:21:47Z INFO  ats_monitoring] starting up generator_monitoring_spawn
[2022-03-20T20:21:47Z INFO  ats_monitoring::power_supply_monitoring::power_supply] Запрос наличия питания от электросети
[2022-03-20T20:21:47Z INFO  ats_monitoring::generator_monitoring::generator] Запрос работоспособности генератора в режиме трансляции питания от электросети
[2022-03-20T20:21:47Z INFO  ats_monitoring::power_supply_monitoring::power_supply] response from PostgreSQL: mains_power_supply = 2
[2022-03-20T20:21:47Z INFO  ats_monitoring::generator_monitoring::generator] response from PostgreSQL: generator_faulty = 0
[2022-03-20T20:21:47Z INFO  ats_monitoring::power_supply_monitoring::power_supply] Питание от электросети есть
[2022-03-20T20:21:47Z INFO  ats_monitoring::generator_monitoring::generator] Генератор в режиме трансляции питания от электросети работает исправно
[2022-03-20T20:21:47Z DEBUG tokio_postgres::prepare] preparing query s0: SELECT EXTRACT(epoch FROM mark) FROM avr_control_insert ORDER BY mark DESC limit 1
[2022-03-20T20:21:47Z DEBUG tokio_postgres::query] executing statement s0 with parameters: []
[2022-03-20T20:21:47Z DEBUG tokio_postgres::prepare] preparing query s1: INSERT INTO события_авр (событие) VALUES ($1)
[2022-03-20T20:21:47Z DEBUG tokio_postgres::prepare] preparing query s2: INSERT INTO события_авр (событие) VALUES ($1)
[2022-03-20T20:21:47Z DEBUG tokio_postgres::query] executing statement s1 with parameters: ["Питание от электросети есть."]
[2022-03-20T20:21:47Z DEBUG tokio_postgres::query] executing statement s2 with parameters: ["Генератор в режиме трансляции питания от электросети работает исправно."]
[2022-03-20T20:21:47Z INFO  ats_monitoring::ram::db] Time (unix) of the last entry in a table 'avr_control_insert': Postgres = 1647807577.86947, Skytable = 1647273642.663296
[2022-03-20T20:21:47Z DEBUG tokio_postgres::prepare] preparing query s3: SELECT EXTRACT(epoch FROM now()) FROM avr_control_insert ORDER BY now() DESC limit 1
[2022-03-20T20:21:47Z DEBUG tokio_postgres::query] executing statement s3 with parameters: []
[2022-03-20T20:21:47Z INFO  ats_monitoring::ram::db] Time (unix) now: PostgreSQL = 1647807707.609871, Skytable = 1647273645.505613
[2022-03-20T20:21:47Z DEBUG tokio_postgres::prepare] preparing query s4: SELECT mark, connection FROM avr_control_insert ORDER BY mark DESC limit 1
[2022-03-20T20:21:47Z DEBUG tokio_postgres::query] executing statement s4 with parameters: []
[2022-03-20T20:21:47Z INFO  ats_monitoring::ram::db] Latest value of plc_connect: PostgreSQL = 1, Skytable = 1
[2022-03-20T20:21:47Z DEBUG tokio_postgres::prepare] preparing query s5: SELECT mark, generator_faulty FROM avr_control_insert ORDER BY mark DESC limit 1
[2022-03-20T20:21:47Z DEBUG tokio_postgres::query] executing statement s5 with parameters: []
[2022-03-20T20:21:47Z INFO  ats_monitoring::ram::db] Latest value of generator_faulty: PostgreSQL = 0, Skytable = 0
[2022-03-20T20:21:47Z DEBUG tokio_postgres::prepare] preparing query s7: SELECT событие, время_и_дата FROM события_авр ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:21:47Z DEBUG tokio_postgres::prepare] preparing query s6: SELECT событие, время_и_дата FROM события_авр ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:21:47Z DEBUG tokio_postgres::query] executing statement s7 with parameters: []
[2022-03-20T20:21:47Z DEBUG tokio_postgres::query] executing statement s6 with parameters: []
[2022-03-20T20:21:47Z INFO  ats_monitoring::psql::postgresql] Запись в табл. события_авр: Генератор в режиме трансляции питания от электросети работает исправно.
[2022-03-20T20:21:47Z INFO  ats_monitoring::psql::postgresql] Запись в табл. события_авр: Генератор в режиме трансляции питания от электросети работает исправно.
[2022-03-20T20:21:47Z DEBUG tokio_postgres::prepare] preparing query s8: INSERT INTO журнал_работы_приложения (событие) VALUES ($1)
[2022-03-20T20:21:47Z DEBUG tokio_postgres::prepare] preparing query s9: INSERT INTO журнал_работы_приложения (событие) VALUES ($1)
[2022-03-20T20:21:47Z DEBUG tokio_postgres::query] executing statement s8 with parameters: ["Питание от электросети есть."]
[2022-03-20T20:21:47Z DEBUG tokio_postgres::query] executing statement s9 with parameters: ["Генератор в режиме трансляции питания от электросети работает исправно."]
[2022-03-20T20:21:47Z DEBUG tokio_postgres::prepare] preparing query s10: SELECT событие, время_и_дата FROM журнал_работы_приложения ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:21:47Z DEBUG tokio_postgres::query] executing statement s10 with parameters: []
[2022-03-20T20:21:47Z DEBUG tokio_postgres::prepare] preparing query s11: SELECT событие, время_и_дата FROM журнал_работы_приложения ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:21:47Z DEBUG tokio_postgres::query] executing statement s11 with parameters: []
[2022-03-20T20:21:47Z INFO  ats_monitoring::psql::postgresql] Запись в табл. журнал_работы_приложения: Генератор в режиме трансляции питания от электросети работает исправно.
[2022-03-20T20:21:47Z INFO  ats_monitoring::psql::postgresql] Запись в табл. журнал_работы_приложения: Генератор в режиме трансляции питания от электросети работает исправно.
[2022-03-20T20:21:47Z INFO  ats_monitoring::modbus_ats::avr_control] Связь ПЛК с модулем modbus_ats: Ok
[2022-03-20T20:21:47Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Связь ПЛК с модулем modbus_winter_garden: Ok
[2022-03-20T20:21:47Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR mains_power_supply: [0]
[2022-03-20T20:21:47Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR phyto_lighting_1: [0]
[2022-03-20T20:21:47Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR start_generator: [0]
[2022-03-20T20:21:47Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR phyto_lighting_2: [0]
[2022-03-20T20:21:47Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR generator_faulty: [0]
[2022-03-20T20:21:47Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR phyto_lighting_3: [0]
[2022-03-20T20:21:48Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR generator_work: [0]
[2022-03-20T20:21:48Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR phyto_lighting_4: [0]
[2022-03-20T20:21:48Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR connection: [1]
[2022-03-20T20:21:48Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR fan: [0]
[2022-03-20T20:21:48Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR load: [0]
[2022-03-20T20:21:48Z DEBUG tokio_postgres::prepare] preparing query s12: INSERT INTO avr_control_insert (mains_power_supply, start_generator, generator_faulty, generator_work, connection) VALUES ($1, $2, $3, $4, $5)
[2022-03-20T20:21:48Z DEBUG tokio_postgres::query] executing statement s12 with parameters: [0, 0, 0, 0, 1]
[2022-03-20T20:21:48Z DEBUG tokio_postgres::prepare] preparing query s13: SELECT mains_power_supply, start_generator, generator_faulty, generator_work, connection FROM avr_control_insert ORDER BY mark DESC limit 1
[2022-03-20T20:21:48Z DEBUG tokio_postgres::query] executing statement s13 with parameters: []
[2022-03-20T20:21:48Z INFO  ats_monitoring::modbus_ats::avr_control] Считаны из ПЛК и записаны в табл. avr_control_insert следующие значения: mains_power_supply: 0, start_generator: 0, generator_faulty: 0, generator_work: 0, connection: 1
[2022-03-20T20:21:48Z DEBUG tokio_postgres::prepare] preparing query s14: INSERT INTO нагрузка_на_генератор (нагрузка) VALUES ($1)
[2022-03-20T20:21:48Z DEBUG tokio_postgres::query] executing statement s14 with parameters: [0]
[2022-03-20T20:21:48Z DEBUG tokio_postgres::prepare] preparing query s15: SELECT нагрузка FROM нагрузка_на_генератор ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:21:48Z DEBUG tokio_postgres::query] executing statement s15 with parameters: []
[2022-03-20T20:21:48Z INFO  ats_monitoring::modbus_ats::avr_control] Считаны из ПЛК и записаны в табл. нагрузка_на_генератор следующие значения: load: 0
[2022-03-20T20:21:48Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR automatic_watering_1: [0]
[2022-03-20T20:21:48Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR automatic_watering_2: [0]
[2022-03-20T20:21:48Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR automatic_watering_3: [0]
[2022-03-20T20:21:48Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR temperature_indoor: [22]
[2022-03-20T20:21:48Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR humidity_indoor: [20]
[2022-03-20T20:21:48Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR illumination_indoor: [18]
[2022-03-20T20:21:48Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR illumination_outdoor: [65334]
[2022-03-20T20:21:50Z INFO  ats_monitoring] starting up write_data_to_ram_spawn
[2022-03-20T20:21:50Z DEBUG tokio_postgres::prepare] preparing query s16: SELECT EXTRACT(epoch FROM mark) FROM avr_control_insert ORDER BY mark DESC limit 1
[2022-03-20T20:21:50Z DEBUG tokio_postgres::query] executing statement s16 with parameters: []
[2022-03-20T20:21:50Z INFO  ats_monitoring::ram::db] Time (unix) of the last entry in a table 'avr_control_insert': Postgres = 1647807708.158685, Skytable = 1647273642.663296
[2022-03-20T20:21:50Z INFO  ats_monitoring] starting up power_supply_monitoring_spawn
[2022-03-20T20:21:50Z INFO  ats_monitoring] starting up generator_monitoring_spawn
[2022-03-20T20:21:50Z INFO  ats_monitoring::power_supply_monitoring::power_supply] Запрос наличия питания от электросети
[2022-03-20T20:21:50Z DEBUG tokio_postgres::prepare] preparing query s17: SELECT EXTRACT(epoch FROM now()) FROM avr_control_insert ORDER BY now() DESC limit 1
[2022-03-20T20:21:50Z INFO  ats_monitoring::generator_monitoring::generator] Запрос работоспособности генератора в режиме трансляции питания от электросети
[2022-03-20T20:21:50Z INFO  ats_monitoring::power_supply_monitoring::power_supply] response from PostgreSQL: mains_power_supply = 2
[2022-03-20T20:21:50Z DEBUG tokio_postgres::query] executing statement s17 with parameters: []
[2022-03-20T20:21:50Z INFO  ats_monitoring::generator_monitoring::generator] response from PostgreSQL: generator_faulty = 0
[2022-03-20T20:21:50Z INFO  ats_monitoring::power_supply_monitoring::power_supply] Питание от электросети есть
[2022-03-20T20:21:50Z INFO  ats_monitoring::generator_monitoring::generator] Генератор в режиме трансляции питания от электросети работает исправно
[2022-03-20T20:21:50Z INFO  ats_monitoring::ram::db] Time (unix) now: PostgreSQL = 1647807710.640441, Skytable = 1647273645.505613
[2022-03-20T20:21:50Z DEBUG tokio_postgres::prepare] preparing query s18: INSERT INTO события_авр (событие) VALUES ($1)
[2022-03-20T20:21:50Z DEBUG tokio_postgres::query] executing statement s18 with parameters: ["Питание от электросети есть."]
[2022-03-20T20:21:50Z DEBUG tokio_postgres::prepare] preparing query s19: INSERT INTO события_авр (событие) VALUES ($1)
[2022-03-20T20:21:50Z DEBUG tokio_postgres::query] executing statement s19 with parameters: ["Генератор в режиме трансляции питания от электросети работает исправно."]
[2022-03-20T20:21:50Z DEBUG tokio_postgres::prepare] preparing query s20: SELECT mark, connection FROM avr_control_insert ORDER BY mark DESC limit 1
[2022-03-20T20:21:50Z DEBUG tokio_postgres::query] executing statement s20 with parameters: []
[2022-03-20T20:21:50Z INFO  ats_monitoring::ram::db] Latest value of plc_connect: PostgreSQL = 1, Skytable = 1
[2022-03-20T20:21:50Z DEBUG tokio_postgres::prepare] preparing query s21: SELECT mark, generator_faulty FROM avr_control_insert ORDER BY mark DESC limit 1
[2022-03-20T20:21:50Z DEBUG tokio_postgres::query] executing statement s21 with parameters: []
[2022-03-20T20:21:50Z DEBUG tokio_postgres::prepare] preparing query s22: SELECT событие, время_и_дата FROM события_авр ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:21:50Z INFO  ats_monitoring::ram::db] Latest value of generator_faulty: PostgreSQL = 0, Skytable = 0
[2022-03-20T20:21:50Z DEBUG tokio_postgres::prepare] preparing query s23: SELECT событие, время_и_дата FROM события_авр ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:21:50Z DEBUG tokio_postgres::query] executing statement s22 with parameters: []
[2022-03-20T20:21:50Z DEBUG tokio_postgres::query] executing statement s23 with parameters: []
[2022-03-20T20:21:50Z INFO  ats_monitoring::psql::postgresql] Запись в табл. события_авр: Генератор в режиме трансляции питания от электросети работает исправно.
[2022-03-20T20:21:50Z INFO  ats_monitoring::psql::postgresql] Запись в табл. события_авр: Генератор в режиме трансляции питания от электросети работает исправно.
[2022-03-20T20:21:50Z DEBUG tokio_postgres::prepare] preparing query s24: INSERT INTO журнал_работы_приложения (событие) VALUES ($1)
[2022-03-20T20:21:50Z DEBUG tokio_postgres::prepare] preparing query s25: INSERT INTO журнал_работы_приложения (событие) VALUES ($1)
[2022-03-20T20:21:50Z DEBUG tokio_postgres::query] executing statement s25 with parameters: ["Генератор в режиме трансляции питания от электросети работает исправно."]
[2022-03-20T20:21:50Z DEBUG tokio_postgres::query] executing statement s24 with parameters: ["Питание от электросети есть."]
[2022-03-20T20:21:50Z DEBUG tokio_postgres::prepare] preparing query s26: SELECT событие, время_и_дата FROM журнал_работы_приложения ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:21:50Z DEBUG tokio_postgres::prepare] preparing query s27: SELECT событие, время_и_дата FROM журнал_работы_приложения ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:21:50Z DEBUG tokio_postgres::query] executing statement s26 with parameters: []
[2022-03-20T20:21:50Z DEBUG tokio_postgres::query] executing statement s27 with parameters: []
[2022-03-20T20:21:50Z INFO  ats_monitoring::psql::postgresql] Запись в табл. журнал_работы_приложения: Питание от электросети есть.
[2022-03-20T20:21:50Z INFO  ats_monitoring::psql::postgresql] Запись в табл. журнал_работы_приложения: Питание от электросети есть.
[2022-03-20T20:21:51Z INFO  ats_monitoring] starting up modbus_ats_spawn
[2022-03-20T20:21:51Z INFO  ats_monitoring::modbus_ats::avr_control] Связь ПЛК с модулем modbus_ats: Ok
[2022-03-20T20:21:51Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR mains_power_supply: [0]
[2022-03-20T20:21:51Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR start_generator: [0]
[2022-03-20T20:21:51Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR generator_faulty: [0]
[2022-03-20T20:21:51Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR generator_work: [0]
[2022-03-20T20:21:51Z INFO  ats_monitoring] starting up modbus_winter_garden_spawn
[2022-03-20T20:21:51Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR connection: [1]
[2022-03-20T20:21:51Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Связь ПЛК с модулем modbus_winter_garden: Ok
[2022-03-20T20:21:51Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR load: [0]
[2022-03-20T20:21:51Z DEBUG tokio_postgres::prepare] preparing query s28: INSERT INTO avr_control_insert (mains_power_supply, start_generator, generator_faulty, generator_work, connection) VALUES ($1, $2, $3, $4, $5)
[2022-03-20T20:21:51Z DEBUG tokio_postgres::query] executing statement s28 with parameters: [0, 0, 0, 0, 1]
[2022-03-20T20:21:51Z DEBUG tokio_postgres::prepare] preparing query s29: SELECT mains_power_supply, start_generator, generator_faulty, generator_work, connection FROM avr_control_insert ORDER BY mark DESC limit 1
[2022-03-20T20:21:51Z DEBUG tokio_postgres::query] executing statement s29 with parameters: []
[2022-03-20T20:21:51Z INFO  ats_monitoring::modbus_ats::avr_control] Считаны из ПЛК и записаны в табл. avr_control_insert следующие значения: mains_power_supply: 0, start_generator: 0, generator_faulty: 0, generator_work: 0, connection: 1
[2022-03-20T20:21:51Z DEBUG tokio_postgres::prepare] preparing query s30: INSERT INTO нагрузка_на_генератор (нагрузка) VALUES ($1)
[2022-03-20T20:21:51Z DEBUG tokio_postgres::query] executing statement s30 with parameters: [0]
[2022-03-20T20:21:51Z DEBUG tokio_postgres::prepare] preparing query s31: SELECT нагрузка FROM нагрузка_на_генератор ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:21:51Z DEBUG tokio_postgres::query] executing statement s31 with parameters: []
[2022-03-20T20:21:51Z INFO  ats_monitoring::modbus_ats::avr_control] Считаны из ПЛК и записаны в табл. нагрузка_на_генератор следующие значения: load: 0
[2022-03-20T20:21:51Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR phyto_lighting_1: [0]
[2022-03-20T20:21:51Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR phyto_lighting_2: [0]
[2022-03-20T20:21:51Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR phyto_lighting_3: [0]
[2022-03-20T20:21:52Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR phyto_lighting_4: [0]
[2022-03-20T20:21:52Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR fan: [0]
[2022-03-20T20:21:52Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR automatic_watering_1: [0]
[2022-03-20T20:21:52Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR automatic_watering_2: [0]
[2022-03-20T20:21:52Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR automatic_watering_3: [0]
[2022-03-20T20:21:52Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR temperature_indoor: [22]
[2022-03-20T20:21:52Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR humidity_indoor: [20]
[2022-03-20T20:21:52Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR illumination_indoor: [12]
[2022-03-20T20:21:52Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR illumination_outdoor: [65351]
[2022-03-20T20:21:53Z INFO  ats_monitoring] starting up write_data_to_ram_spawn
[2022-03-20T20:21:53Z DEBUG tokio_postgres::prepare] preparing query s32: SELECT EXTRACT(epoch FROM mark) FROM avr_control_insert ORDER BY mark DESC limit 1
[2022-03-20T20:21:53Z DEBUG tokio_postgres::query] executing statement s32 with parameters: []
[2022-03-20T20:21:53Z INFO  ats_monitoring::ram::db] Time (unix) of the last entry in a table 'avr_control_insert': Postgres = 1647807711.732322, Skytable = 1647273642.663296
[2022-03-20T20:21:53Z INFO  ats_monitoring] starting up power_supply_monitoring_spawn
[2022-03-20T20:21:53Z INFO  ats_monitoring] starting up generator_monitoring_spawn
[2022-03-20T20:21:53Z DEBUG tokio_postgres::prepare] preparing query s33: SELECT EXTRACT(epoch FROM now()) FROM avr_control_insert ORDER BY now() DESC limit 1
[2022-03-20T20:21:53Z INFO  ats_monitoring::power_supply_monitoring::power_supply] Запрос наличия питания от электросети
[2022-03-20T20:21:53Z DEBUG tokio_postgres::query] executing statement s33 with parameters: []
[2022-03-20T20:21:53Z INFO  ats_monitoring::generator_monitoring::generator] Запрос работоспособности генератора в режиме трансляции питания от электросети
[2022-03-20T20:21:53Z INFO  ats_monitoring::power_supply_monitoring::power_supply] response from PostgreSQL: mains_power_supply = 2
[2022-03-20T20:21:53Z INFO  ats_monitoring::power_supply_monitoring::power_supply] Питание от электросети есть
[2022-03-20T20:21:53Z INFO  ats_monitoring::generator_monitoring::generator] response from PostgreSQL: generator_faulty = 0
[2022-03-20T20:21:53Z INFO  ats_monitoring::generator_monitoring::generator] Генератор в режиме трансляции питания от электросети работает исправно
[2022-03-20T20:21:53Z INFO  ats_monitoring::ram::db] Time (unix) now: PostgreSQL = 1647807713.690527, Skytable = 1647273645.505613
[2022-03-20T20:21:53Z DEBUG tokio_postgres::prepare] preparing query s34: INSERT INTO события_авр (событие) VALUES ($1)
[2022-03-20T20:21:53Z DEBUG tokio_postgres::prepare] preparing query s35: INSERT INTO события_авр (событие) VALUES ($1)
[2022-03-20T20:21:53Z DEBUG tokio_postgres::query] executing statement s34 with parameters: ["Питание от электросети есть."]
[2022-03-20T20:21:53Z DEBUG tokio_postgres::query] executing statement s35 with parameters: ["Генератор в режиме трансляции питания от электросети работает исправно."]
[2022-03-20T20:21:53Z DEBUG tokio_postgres::prepare] preparing query s36: SELECT mark, connection FROM avr_control_insert ORDER BY mark DESC limit 1
[2022-03-20T20:21:53Z DEBUG tokio_postgres::query] executing statement s36 with parameters: []
[2022-03-20T20:21:53Z INFO  ats_monitoring::ram::db] Latest value of plc_connect: PostgreSQL = 1, Skytable = 1
[2022-03-20T20:21:53Z DEBUG tokio_postgres::prepare] preparing query s37: SELECT событие, время_и_дата FROM события_авр ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:21:53Z DEBUG tokio_postgres::query] executing statement s37 with parameters: []
[2022-03-20T20:21:53Z INFO  ats_monitoring::psql::postgresql] Запись в табл. события_авр: Питание от электросети есть.
[2022-03-20T20:21:53Z DEBUG tokio_postgres::prepare] preparing query s38: SELECT mark, generator_faulty FROM avr_control_insert ORDER BY mark DESC limit 1
[2022-03-20T20:21:53Z DEBUG tokio_postgres::query] executing statement s38 with parameters: []
[2022-03-20T20:21:53Z DEBUG tokio_postgres::prepare] preparing query s39: SELECT событие, время_и_дата FROM события_авр ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:21:53Z DEBUG tokio_postgres::query] executing statement s39 with parameters: []
[2022-03-20T20:21:53Z INFO  ats_monitoring::psql::postgresql] Запись в табл. события_авр: Генератор в режиме трансляции питания от электросети работает исправно.
[2022-03-20T20:21:53Z INFO  ats_monitoring::ram::db] Latest value of generator_faulty: PostgreSQL = 0, Skytable = 0
[2022-03-20T20:21:53Z DEBUG tokio_postgres::prepare] preparing query s40: INSERT INTO журнал_работы_приложения (событие) VALUES ($1)
[2022-03-20T20:21:53Z DEBUG tokio_postgres::query] executing statement s40 with parameters: ["Питание от электросети есть."]
[2022-03-20T20:21:53Z DEBUG tokio_postgres::prepare] preparing query s41: INSERT INTO журнал_работы_приложения (событие) VALUES ($1)
[2022-03-20T20:21:53Z DEBUG tokio_postgres::query] executing statement s41 with parameters: ["Генератор в режиме трансляции питания от электросети работает исправно."]
[2022-03-20T20:21:53Z DEBUG tokio_postgres::prepare] preparing query s42: SELECT событие, время_и_дата FROM журнал_работы_приложения ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:21:53Z DEBUG tokio_postgres::query] executing statement s42 with parameters: []
[2022-03-20T20:21:53Z INFO  ats_monitoring::psql::postgresql] Запись в табл. журнал_работы_приложения: Питание от электросети есть.
[2022-03-20T20:21:53Z DEBUG tokio_postgres::prepare] preparing query s43: SELECT событие, время_и_дата FROM журнал_работы_приложения ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:21:53Z DEBUG tokio_postgres::query] executing statement s43 with parameters: []
[2022-03-20T20:21:53Z INFO  ats_monitoring::psql::postgresql] Запись в табл. журнал_работы_приложения: Генератор в режиме трансляции питания от электросети работает исправно.
[2022-03-20T20:21:54Z INFO  ats_monitoring] starting up modbus_ats_spawn
[2022-03-20T20:21:54Z INFO  ats_monitoring::modbus_ats::avr_control] Связь ПЛК с модулем modbus_ats: Ok
[2022-03-20T20:21:54Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR mains_power_supply: [0]
[2022-03-20T20:21:54Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR start_generator: [0]
[2022-03-20T20:21:55Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR generator_faulty: [0]
[2022-03-20T20:21:55Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR generator_work: [0]
[2022-03-20T20:21:55Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR connection: [1]
[2022-03-20T20:21:55Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR load: [0]
[2022-03-20T20:21:55Z DEBUG tokio_postgres::prepare] preparing query s44: INSERT INTO avr_control_insert (mains_power_supply, start_generator, generator_faulty, generator_work, connection) VALUES ($1, $2, $3, $4, $5)
[2022-03-20T20:21:55Z DEBUG tokio_postgres::query] executing statement s44 with parameters: [0, 0, 0, 0, 1]
[2022-03-20T20:21:55Z DEBUG tokio_postgres::prepare] preparing query s45: SELECT mains_power_supply, start_generator, generator_faulty, generator_work, connection FROM avr_control_insert ORDER BY mark DESC limit 1
[2022-03-20T20:21:55Z DEBUG tokio_postgres::query] executing statement s45 with parameters: []
[2022-03-20T20:21:55Z INFO  ats_monitoring::modbus_ats::avr_control] Считаны из ПЛК и записаны в табл. avr_control_insert следующие значения: mains_power_supply: 0, start_generator: 0, generator_faulty: 0, generator_work: 0, connection: 1
[2022-03-20T20:21:55Z DEBUG tokio_postgres::prepare] preparing query s46: INSERT INTO нагрузка_на_генератор (нагрузка) VALUES ($1)
[2022-03-20T20:21:55Z DEBUG tokio_postgres::query] executing statement s46 with parameters: [0]
[2022-03-20T20:21:55Z DEBUG tokio_postgres::prepare] preparing query s47: SELECT нагрузка FROM нагрузка_на_генератор ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:21:55Z DEBUG tokio_postgres::query] executing statement s47 with parameters: []
[2022-03-20T20:21:55Z INFO  ats_monitoring::modbus_ats::avr_control] Считаны из ПЛК и записаны в табл. нагрузка_на_генератор следующие значения: load: 0
[2022-03-20T20:21:55Z INFO  ats_monitoring] starting up modbus_winter_garden_spawn
[2022-03-20T20:21:55Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Связь ПЛК с модулем modbus_winter_garden: Ok
[2022-03-20T20:21:55Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR phyto_lighting_1: [0]
[2022-03-20T20:21:55Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR phyto_lighting_2: [0]
[2022-03-20T20:21:55Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR phyto_lighting_3: [0]
[2022-03-20T20:21:56Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR phyto_lighting_4: [0]
[2022-03-20T20:21:56Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR fan: [0]
[2022-03-20T20:21:56Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR automatic_watering_1: [0]
[2022-03-20T20:21:56Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR automatic_watering_2: [0]
[2022-03-20T20:21:56Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR automatic_watering_3: [0]
[2022-03-20T20:21:56Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR temperature_indoor: [22]
[2022-03-20T20:21:56Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR humidity_indoor: [20]
[2022-03-20T20:21:56Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR illumination_indoor: [12]
[2022-03-20T20:21:56Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR illumination_outdoor: [65343]
[2022-03-20T20:21:56Z INFO  ats_monitoring] starting up write_data_to_ram_spawn
[2022-03-20T20:21:56Z INFO  ats_monitoring] starting up power_supply_monitoring_spawn
[2022-03-20T20:21:56Z INFO  ats_monitoring] starting up generator_monitoring_spawn
[2022-03-20T20:21:56Z INFO  ats_monitoring::power_supply_monitoring::power_supply] Запрос наличия питания от электросети
[2022-03-20T20:21:56Z INFO  ats_monitoring::generator_monitoring::generator] Запрос работоспособности генератора в режиме трансляции питания от электросети
[2022-03-20T20:21:56Z DEBUG tokio_postgres::prepare] preparing query s48: SELECT EXTRACT(epoch FROM mark) FROM avr_control_insert ORDER BY mark DESC limit 1
[2022-03-20T20:21:56Z INFO  ats_monitoring::power_supply_monitoring::power_supply] response from PostgreSQL: mains_power_supply = 2
[2022-03-20T20:21:56Z INFO  ats_monitoring::generator_monitoring::generator] response from PostgreSQL: generator_faulty = 0
[2022-03-20T20:21:56Z INFO  ats_monitoring::power_supply_monitoring::power_supply] Питание от электросети есть
[2022-03-20T20:21:56Z DEBUG tokio_postgres::query] executing statement s48 with parameters: []
[2022-03-20T20:21:56Z INFO  ats_monitoring::generator_monitoring::generator] Генератор в режиме трансляции питания от электросети работает исправно
[2022-03-20T20:21:56Z INFO  ats_monitoring::ram::db] Time (unix) of the last entry in a table 'avr_control_insert': Postgres = 1647807715.298936, Skytable = 1647273642.663296
[2022-03-20T20:21:56Z DEBUG tokio_postgres::prepare] preparing query s49: INSERT INTO события_авр (событие) VALUES ($1)
[2022-03-20T20:21:56Z DEBUG tokio_postgres::prepare] preparing query s50: INSERT INTO события_авр (событие) VALUES ($1)
[2022-03-20T20:21:56Z DEBUG tokio_postgres::query] executing statement s49 with parameters: ["Питание от электросети есть."]
[2022-03-20T20:21:56Z DEBUG tokio_postgres::query] executing statement s50 with parameters: ["Генератор в режиме трансляции питания от электросети работает исправно."]
[2022-03-20T20:21:56Z DEBUG tokio_postgres::prepare] preparing query s51: SELECT событие, время_и_дата FROM события_авр ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:21:56Z DEBUG tokio_postgres::prepare] preparing query s52: SELECT EXTRACT(epoch FROM now()) FROM avr_control_insert ORDER BY now() DESC limit 1
[2022-03-20T20:21:56Z DEBUG tokio_postgres::prepare] preparing query s53: SELECT событие, время_и_дата FROM события_авр ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:21:56Z DEBUG tokio_postgres::query] executing statement s51 with parameters: []
[2022-03-20T20:21:56Z DEBUG tokio_postgres::query] executing statement s53 with parameters: []
[2022-03-20T20:21:56Z DEBUG tokio_postgres::query] executing statement s52 with parameters: []
[2022-03-20T20:21:56Z INFO  ats_monitoring::psql::postgresql] Запись в табл. события_авр: Генератор в режиме трансляции питания от электросети работает исправно.
[2022-03-20T20:21:56Z INFO  ats_monitoring::psql::postgresql] Запись в табл. события_авр: Генератор в режиме трансляции питания от электросети работает исправно.
[2022-03-20T20:21:56Z INFO  ats_monitoring::ram::db] Time (unix) now: PostgreSQL = 1647807716.717115, Skytable = 1647273645.505613
[2022-03-20T20:21:56Z DEBUG tokio_postgres::prepare] preparing query s54: INSERT INTO журнал_работы_приложения (событие) VALUES ($1)
[2022-03-20T20:21:56Z DEBUG tokio_postgres::query] executing statement s54 with parameters: ["Питание от электросети есть."]
[2022-03-20T20:21:56Z DEBUG tokio_postgres::prepare] preparing query s55: INSERT INTO журнал_работы_приложения (событие) VALUES ($1)
[2022-03-20T20:21:56Z DEBUG tokio_postgres::prepare] preparing query s56: SELECT mark, connection FROM avr_control_insert ORDER BY mark DESC limit 1
[2022-03-20T20:21:56Z DEBUG tokio_postgres::query] executing statement s55 with parameters: ["Генератор в режиме трансляции питания от электросети работает исправно."]
[2022-03-20T20:21:56Z DEBUG tokio_postgres::prepare] preparing query s57: SELECT событие, время_и_дата FROM журнал_работы_приложения ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:21:56Z DEBUG tokio_postgres::query] executing statement s57 with parameters: []
[2022-03-20T20:21:56Z DEBUG tokio_postgres::query] executing statement s56 with parameters: []
[2022-03-20T20:21:56Z DEBUG tokio_postgres::prepare] preparing query s58: SELECT событие, время_и_дата FROM журнал_работы_приложения ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:21:56Z INFO  ats_monitoring::psql::postgresql] Запись в табл. журнал_работы_приложения: Питание от электросети есть.
[2022-03-20T20:21:56Z DEBUG tokio_postgres::query] executing statement s58 with parameters: []
[2022-03-20T20:21:56Z INFO  ats_monitoring::psql::postgresql] Запись в табл. журнал_работы_приложения: Генератор в режиме трансляции питания от электросети работает исправно.
[2022-03-20T20:21:56Z INFO  ats_monitoring::ram::db] Latest value of plc_connect: PostgreSQL = 1, Skytable = 1
[2022-03-20T20:21:56Z DEBUG tokio_postgres::prepare] preparing query s59: SELECT mark, generator_faulty FROM avr_control_insert ORDER BY mark DESC limit 1
[2022-03-20T20:21:56Z DEBUG tokio_postgres::query] executing statement s59 with parameters: []
[2022-03-20T20:21:56Z INFO  ats_monitoring::ram::db] Latest value of generator_faulty: PostgreSQL = 0, Skytable = 0
[2022-03-20T20:21:58Z INFO  ats_monitoring] starting up modbus_ats_spawn
[2022-03-20T20:21:58Z INFO  ats_monitoring::modbus_ats::avr_control] Связь ПЛК с модулем modbus_ats: Ok
[2022-03-20T20:21:58Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR mains_power_supply: [0]
[2022-03-20T20:21:58Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR start_generator: [0]
[2022-03-20T20:21:58Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR generator_faulty: [0]
[2022-03-20T20:21:58Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR generator_work: [0]
[2022-03-20T20:21:58Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR connection: [1]
[2022-03-20T20:21:58Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR load: [0]
[2022-03-20T20:21:58Z DEBUG tokio_postgres::prepare] preparing query s60: INSERT INTO avr_control_insert (mains_power_supply, start_generator, generator_faulty, generator_work, connection) VALUES ($1, $2, $3, $4, $5)
[2022-03-20T20:21:58Z DEBUG tokio_postgres::query] executing statement s60 with parameters: [0, 0, 0, 0, 1]
[2022-03-20T20:21:58Z DEBUG tokio_postgres::prepare] preparing query s61: SELECT mains_power_supply, start_generator, generator_faulty, generator_work, connection FROM avr_control_insert ORDER BY mark DESC limit 1
[2022-03-20T20:21:58Z DEBUG tokio_postgres::query] executing statement s61 with parameters: []
[2022-03-20T20:21:58Z INFO  ats_monitoring::modbus_ats::avr_control] Считаны из ПЛК и записаны в табл. avr_control_insert следующие значения: mains_power_supply: 0, start_generator: 0, generator_faulty: 0, generator_work: 0, connection: 1
[2022-03-20T20:21:58Z DEBUG tokio_postgres::prepare] preparing query s62: INSERT INTO нагрузка_на_генератор (нагрузка) VALUES ($1)
[2022-03-20T20:21:58Z DEBUG tokio_postgres::query] executing statement s62 with parameters: [0]
[2022-03-20T20:21:58Z DEBUG tokio_postgres::prepare] preparing query s63: SELECT нагрузка FROM нагрузка_на_генератор ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:21:58Z DEBUG tokio_postgres::query] executing statement s63 with parameters: []
[2022-03-20T20:21:58Z INFO  ats_monitoring::modbus_ats::avr_control] Считаны из ПЛК и записаны в табл. нагрузка_на_генератор следующие значения: load: 0
[2022-03-20T20:21:59Z INFO  ats_monitoring] starting up modbus_winter_garden_spawn
[2022-03-20T20:21:59Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Связь ПЛК с модулем modbus_winter_garden: Ok
[2022-03-20T20:21:59Z INFO  ats_monitoring] starting up power_supply_monitoring_spawn
[2022-03-20T20:21:59Z INFO  ats_monitoring] starting up generator_monitoring_spawn
[2022-03-20T20:21:59Z INFO  ats_monitoring::power_supply_monitoring::power_supply] Запрос наличия питания от электросети
[2022-03-20T20:21:59Z INFO  ats_monitoring::generator_monitoring::generator] Запрос работоспособности генератора в режиме трансляции питания от электросети
[2022-03-20T20:21:59Z INFO  ats_monitoring::power_supply_monitoring::power_supply] response from PostgreSQL: mains_power_supply = 2
[2022-03-20T20:21:59Z INFO  ats_monitoring::generator_monitoring::generator] response from PostgreSQL: generator_faulty = 0
[2022-03-20T20:21:59Z INFO  ats_monitoring::power_supply_monitoring::power_supply] Питание от электросети есть
[2022-03-20T20:21:59Z INFO  ats_monitoring::generator_monitoring::generator] Генератор в режиме трансляции питания от электросети работает исправно
[2022-03-20T20:21:59Z INFO  ats_monitoring] starting up write_data_to_ram_spawn
[2022-03-20T20:21:59Z DEBUG tokio_postgres::prepare] preparing query s64: INSERT INTO события_авр (событие) VALUES ($1)
[2022-03-20T20:21:59Z DEBUG tokio_postgres::prepare] preparing query s65: INSERT INTO события_авр (событие) VALUES ($1)
[2022-03-20T20:21:59Z DEBUG tokio_postgres::query] executing statement s64 with parameters: ["Питание от электросети есть."]
[2022-03-20T20:21:59Z DEBUG tokio_postgres::prepare] preparing query s66: SELECT EXTRACT(epoch FROM mark) FROM avr_control_insert ORDER BY mark DESC limit 1
[2022-03-20T20:21:59Z DEBUG tokio_postgres::query] executing statement s65 with parameters: ["Генератор в режиме трансляции питания от электросети работает исправно."]
[2022-03-20T20:21:59Z DEBUG tokio_postgres::query] executing statement s66 with parameters: []
[2022-03-20T20:21:59Z DEBUG tokio_postgres::prepare] preparing query s67: SELECT событие, время_и_дата FROM события_авр ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:21:59Z DEBUG tokio_postgres::prepare] preparing query s68: SELECT событие, время_и_дата FROM события_авр ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:21:59Z DEBUG tokio_postgres::query] executing statement s67 with parameters: []
[2022-03-20T20:21:59Z DEBUG tokio_postgres::query] executing statement s68 with parameters: []
[2022-03-20T20:21:59Z INFO  ats_monitoring::ram::db] Time (unix) of the last entry in a table 'avr_control_insert': Postgres = 1647807718.889465, Skytable = 1647273642.663296
[2022-03-20T20:21:59Z INFO  ats_monitoring::psql::postgresql] Запись в табл. события_авр: Генератор в режиме трансляции питания от электросети работает исправно.
[2022-03-20T20:21:59Z INFO  ats_monitoring::psql::postgresql] Запись в табл. события_авр: Генератор в режиме трансляции питания от электросети работает исправно.
[2022-03-20T20:21:59Z DEBUG tokio_postgres::prepare] preparing query s69: SELECT EXTRACT(epoch FROM now()) FROM avr_control_insert ORDER BY now() DESC limit 1
[2022-03-20T20:21:59Z DEBUG tokio_postgres::prepare] preparing query s70: INSERT INTO журнал_работы_приложения (событие) VALUES ($1)
[2022-03-20T20:21:59Z DEBUG tokio_postgres::prepare] preparing query s71: INSERT INTO журнал_работы_приложения (событие) VALUES ($1)
[2022-03-20T20:21:59Z DEBUG tokio_postgres::query] executing statement s69 with parameters: []
[2022-03-20T20:21:59Z DEBUG tokio_postgres::query] executing statement s70 with parameters: ["Питание от электросети есть."]
[2022-03-20T20:21:59Z DEBUG tokio_postgres::query] executing statement s71 with parameters: ["Генератор в режиме трансляции питания от электросети работает исправно."]
[2022-03-20T20:21:59Z DEBUG tokio_postgres::prepare] preparing query s72: SELECT событие, время_и_дата FROM журнал_работы_приложения ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:21:59Z DEBUG tokio_postgres::prepare] preparing query s73: SELECT событие, время_и_дата FROM журнал_работы_приложения ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:21:59Z DEBUG tokio_postgres::query] executing statement s72 with parameters: []
[2022-03-20T20:21:59Z INFO  ats_monitoring::ram::db] Time (unix) now: PostgreSQL = 1647807719.754697, Skytable = 1647273645.505613
[2022-03-20T20:21:59Z DEBUG tokio_postgres::query] executing statement s73 with parameters: []
[2022-03-20T20:21:59Z INFO  ats_monitoring::psql::postgresql] Запись в табл. журнал_работы_приложения: Генератор в режиме трансляции питания от электросети работает исправно.
[2022-03-20T20:21:59Z INFO  ats_monitoring::psql::postgresql] Запись в табл. журнал_работы_приложения: Генератор в режиме трансляции питания от электросети работает исправно.
[2022-03-20T20:21:59Z DEBUG tokio_postgres::prepare] preparing query s74: SELECT mark, connection FROM avr_control_insert ORDER BY mark DESC limit 1
[2022-03-20T20:21:59Z DEBUG tokio_postgres::query] executing statement s74 with parameters: []
[2022-03-20T20:21:59Z INFO  ats_monitoring::ram::db] Latest value of plc_connect: PostgreSQL = 1, Skytable = 1
[2022-03-20T20:21:59Z DEBUG tokio_postgres::prepare] preparing query s75: SELECT mark, generator_faulty FROM avr_control_insert ORDER BY mark DESC limit 1
[2022-03-20T20:21:59Z DEBUG tokio_postgres::query] executing statement s75 with parameters: []
[2022-03-20T20:21:59Z INFO  ats_monitoring::ram::db] Latest value of generator_faulty: PostgreSQL = 0, Skytable = 0
[2022-03-20T20:21:59Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR phyto_lighting_1: [0]
[2022-03-20T20:21:59Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR phyto_lighting_2: [0]
[2022-03-20T20:21:59Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR phyto_lighting_3: [0]
[2022-03-20T20:22:00Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR phyto_lighting_4: [0]
[2022-03-20T20:22:00Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR fan: [0]
[2022-03-20T20:22:00Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR automatic_watering_1: [0]
[2022-03-20T20:22:00Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR automatic_watering_2: [0]
[2022-03-20T20:22:00Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR automatic_watering_3: [0]
[2022-03-20T20:22:00Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR temperature_indoor: [22]
[2022-03-20T20:22:00Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR humidity_indoor: [20]
[2022-03-20T20:22:00Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR illumination_indoor: [13]
[2022-03-20T20:22:00Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR illumination_outdoor: [65337]
[2022-03-20T20:22:01Z INFO  ats_monitoring] starting up modbus_ats_spawn
[2022-03-20T20:22:02Z INFO  ats_monitoring::modbus_ats::avr_control] Связь ПЛК с модулем modbus_ats: Ok
[2022-03-20T20:22:02Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR mains_power_supply: [0]
[2022-03-20T20:22:02Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR start_generator: [0]
[2022-03-20T20:22:02Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR generator_faulty: [0]
[2022-03-20T20:22:02Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR generator_work: [0]
[2022-03-20T20:22:02Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR connection: [1]
[2022-03-20T20:22:02Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR load: [0]
[2022-03-20T20:22:02Z DEBUG tokio_postgres::prepare] preparing query s76: INSERT INTO avr_control_insert (mains_power_supply, start_generator, generator_faulty, generator_work, connection) VALUES ($1, $2, $3, $4, $5)
[2022-03-20T20:22:02Z DEBUG tokio_postgres::query] executing statement s76 with parameters: [0, 0, 0, 0, 1]
[2022-03-20T20:22:02Z DEBUG tokio_postgres::prepare] preparing query s77: SELECT mains_power_supply, start_generator, generator_faulty, generator_work, connection FROM avr_control_insert ORDER BY mark DESC limit 1
[2022-03-20T20:22:02Z DEBUG tokio_postgres::query] executing statement s77 with parameters: []
[2022-03-20T20:22:02Z INFO  ats_monitoring::modbus_ats::avr_control] Считаны из ПЛК и записаны в табл. avr_control_insert следующие значения: mains_power_supply: 0, start_generator: 0, generator_faulty: 0, generator_work: 0, connection: 1
[2022-03-20T20:22:02Z DEBUG tokio_postgres::prepare] preparing query s78: INSERT INTO нагрузка_на_генератор (нагрузка) VALUES ($1)
[2022-03-20T20:22:02Z DEBUG tokio_postgres::query] executing statement s78 with parameters: [0]
[2022-03-20T20:22:02Z DEBUG tokio_postgres::prepare] preparing query s79: SELECT нагрузка FROM нагрузка_на_генератор ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:22:02Z DEBUG tokio_postgres::query] executing statement s79 with parameters: []
[2022-03-20T20:22:02Z INFO  ats_monitoring::modbus_ats::avr_control] Считаны из ПЛК и записаны в табл. нагрузка_на_генератор следующие значения: load: 0
[2022-03-20T20:22:02Z INFO  ats_monitoring] starting up power_supply_monitoring_spawn
[2022-03-20T20:22:02Z INFO  ats_monitoring] starting up generator_monitoring_spawn
[2022-03-20T20:22:02Z INFO  ats_monitoring::power_supply_monitoring::power_supply] Запрос наличия питания от электросети
[2022-03-20T20:22:02Z INFO  ats_monitoring::generator_monitoring::generator] Запрос работоспособности генератора в режиме трансляции питания от электросети
[2022-03-20T20:22:02Z INFO  ats_monitoring::power_supply_monitoring::power_supply] response from PostgreSQL: mains_power_supply = 2
[2022-03-20T20:22:02Z INFO  ats_monitoring::generator_monitoring::generator] response from PostgreSQL: generator_faulty = 0
[2022-03-20T20:22:02Z INFO  ats_monitoring::power_supply_monitoring::power_supply] Питание от электросети есть
[2022-03-20T20:22:02Z INFO  ats_monitoring::generator_monitoring::generator] Генератор в режиме трансляции питания от электросети работает исправно
[2022-03-20T20:22:02Z DEBUG tokio_postgres::prepare] preparing query s80: INSERT INTO события_авр (событие) VALUES ($1)
[2022-03-20T20:22:02Z DEBUG tokio_postgres::query] executing statement s80 with parameters: ["Питание от электросети есть."]
[2022-03-20T20:22:02Z DEBUG tokio_postgres::prepare] preparing query s81: INSERT INTO события_авр (событие) VALUES ($1)
[2022-03-20T20:22:02Z DEBUG tokio_postgres::query] executing statement s81 with parameters: ["Генератор в режиме трансляции питания от электросети работает исправно."]
[2022-03-20T20:22:02Z DEBUG tokio_postgres::prepare] preparing query s82: SELECT событие, время_и_дата FROM события_авр ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:22:02Z DEBUG tokio_postgres::query] executing statement s82 with parameters: []
[2022-03-20T20:22:02Z DEBUG tokio_postgres::prepare] preparing query s83: SELECT событие, время_и_дата FROM события_авр ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:22:02Z DEBUG tokio_postgres::query] executing statement s83 with parameters: []
[2022-03-20T20:22:02Z INFO  ats_monitoring::psql::postgresql] Запись в табл. события_авр: Генератор в режиме трансляции питания от электросети работает исправно.
[2022-03-20T20:22:02Z INFO  ats_monitoring::psql::postgresql] Запись в табл. события_авр: Генератор в режиме трансляции питания от электросети работает исправно.
[2022-03-20T20:22:02Z INFO  ats_monitoring] starting up write_data_to_ram_spawn
[2022-03-20T20:22:02Z DEBUG tokio_postgres::prepare] preparing query s84: INSERT INTO журнал_работы_приложения (событие) VALUES ($1)
[2022-03-20T20:22:02Z DEBUG tokio_postgres::prepare] preparing query s85: INSERT INTO журнал_работы_приложения (событие) VALUES ($1)
[2022-03-20T20:22:02Z DEBUG tokio_postgres::query] executing statement s84 with parameters: ["Питание от электросети есть."]
[2022-03-20T20:22:02Z DEBUG tokio_postgres::query] executing statement s85 with parameters: ["Генератор в режиме трансляции питания от электросети работает исправно."]
[2022-03-20T20:22:02Z DEBUG tokio_postgres::prepare] preparing query s86: SELECT EXTRACT(epoch FROM mark) FROM avr_control_insert ORDER BY mark DESC limit 1
[2022-03-20T20:22:02Z DEBUG tokio_postgres::prepare] preparing query s87: SELECT событие, время_и_дата FROM журнал_работы_приложения ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:22:02Z DEBUG tokio_postgres::query] executing statement s87 with parameters: []
[2022-03-20T20:22:02Z DEBUG tokio_postgres::prepare] preparing query s88: SELECT событие, время_и_дата FROM журнал_работы_приложения ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:22:02Z DEBUG tokio_postgres::query] executing statement s86 with parameters: []
[2022-03-20T20:22:02Z DEBUG tokio_postgres::query] executing statement s88 with parameters: []
[2022-03-20T20:22:02Z INFO  ats_monitoring::psql::postgresql] Запись в табл. журнал_работы_приложения: Генератор в режиме трансляции питания от электросети работает исправно.
[2022-03-20T20:22:02Z INFO  ats_monitoring::psql::postgresql] Запись в табл. журнал_работы_приложения: Генератор в режиме трансляции питания от электросети работает исправно.
[2022-03-20T20:22:02Z INFO  ats_monitoring::ram::db] Time (unix) of the last entry in a table 'avr_control_insert': Postgres = 1647807722.482174, Skytable = 1647273642.663296
[2022-03-20T20:22:02Z DEBUG tokio_postgres::prepare] preparing query s89: SELECT EXTRACT(epoch FROM now()) FROM avr_control_insert ORDER BY now() DESC limit 1
[2022-03-20T20:22:02Z DEBUG tokio_postgres::query] executing statement s89 with parameters: []
[2022-03-20T20:22:02Z INFO  ats_monitoring::ram::db] Time (unix) now: PostgreSQL = 1647807722.800633, Skytable = 1647273645.505613
[2022-03-20T20:22:02Z DEBUG tokio_postgres::prepare] preparing query s90: SELECT mark, connection FROM avr_control_insert ORDER BY mark DESC limit 1
[2022-03-20T20:22:02Z DEBUG tokio_postgres::query] executing statement s90 with parameters: []
[2022-03-20T20:22:02Z INFO  ats_monitoring::ram::db] Latest value of plc_connect: PostgreSQL = 1, Skytable = 1
[2022-03-20T20:22:02Z DEBUG tokio_postgres::prepare] preparing query s91: SELECT mark, generator_faulty FROM avr_control_insert ORDER BY mark DESC limit 1
[2022-03-20T20:22:02Z DEBUG tokio_postgres::query] executing statement s91 with parameters: []
[2022-03-20T20:22:02Z INFO  ats_monitoring::ram::db] Latest value of generator_faulty: PostgreSQL = 0, Skytable = 0
[2022-03-20T20:22:03Z INFO  ats_monitoring] starting up modbus_winter_garden_spawn
[2022-03-20T20:22:03Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Связь ПЛК с модулем modbus_winter_garden: Ok
[2022-03-20T20:22:03Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR phyto_lighting_1: [0]
[2022-03-20T20:22:03Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR phyto_lighting_2: [0]
[2022-03-20T20:22:03Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR phyto_lighting_3: [0]
[2022-03-20T20:22:03Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR phyto_lighting_4: [0]
[2022-03-20T20:22:04Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR fan: [0]
[2022-03-20T20:22:04Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR automatic_watering_1: [0]
[2022-03-20T20:22:04Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR automatic_watering_2: [0]
[2022-03-20T20:22:04Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR automatic_watering_3: [0]
[2022-03-20T20:22:04Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR temperature_indoor: [22]
[2022-03-20T20:22:04Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR humidity_indoor: [20]
[2022-03-20T20:22:04Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR illumination_indoor: [16]
[2022-03-20T20:22:04Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR illumination_outdoor: [65341]
[2022-03-20T20:22:05Z INFO  ats_monitoring] starting up modbus_ats_spawn
[2022-03-20T20:22:05Z INFO  ats_monitoring::modbus_ats::avr_control] Связь ПЛК с модулем modbus_ats: Ok
[2022-03-20T20:22:05Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR mains_power_supply: [0]
[2022-03-20T20:22:05Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR start_generator: [0]
[2022-03-20T20:22:05Z INFO  ats_monitoring] starting up power_supply_monitoring_spawn
[2022-03-20T20:22:05Z INFO  ats_monitoring] starting up generator_monitoring_spawn
[2022-03-20T20:22:05Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR generator_faulty: [0]
[2022-03-20T20:22:05Z INFO  ats_monitoring::power_supply_monitoring::power_supply] Запрос наличия питания от электросети
[2022-03-20T20:22:05Z INFO  ats_monitoring::power_supply_monitoring::power_supply] response from PostgreSQL: mains_power_supply = 2
[2022-03-20T20:22:05Z INFO  ats_monitoring::generator_monitoring::generator] Запрос работоспособности генератора в режиме трансляции питания от электросети
[2022-03-20T20:22:05Z INFO  ats_monitoring::power_supply_monitoring::power_supply] Питание от электросети есть
[2022-03-20T20:22:05Z INFO  ats_monitoring::generator_monitoring::generator] response from PostgreSQL: generator_faulty = 0
[2022-03-20T20:22:05Z INFO  ats_monitoring::generator_monitoring::generator] Генератор в режиме трансляции питания от электросети работает исправно
[2022-03-20T20:22:05Z DEBUG tokio_postgres::prepare] preparing query s92: INSERT INTO события_авр (событие) VALUES ($1)
[2022-03-20T20:22:05Z DEBUG tokio_postgres::prepare] preparing query s93: INSERT INTO события_авр (событие) VALUES ($1)
[2022-03-20T20:22:05Z DEBUG tokio_postgres::query] executing statement s92 with parameters: ["Питание от электросети есть."]
[2022-03-20T20:22:05Z DEBUG tokio_postgres::query] executing statement s93 with parameters: ["Генератор в режиме трансляции питания от электросети работает исправно."]
[2022-03-20T20:22:05Z DEBUG tokio_postgres::prepare] preparing query s94: SELECT событие, время_и_дата FROM события_авр ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:22:05Z DEBUG tokio_postgres::query] executing statement s94 with parameters: []
[2022-03-20T20:22:05Z DEBUG tokio_postgres::prepare] preparing query s95: SELECT событие, время_и_дата FROM события_авр ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:22:05Z INFO  ats_monitoring::psql::postgresql] Запись в табл. события_авр: Генератор в режиме трансляции питания от электросети работает исправно.
[2022-03-20T20:22:05Z DEBUG tokio_postgres::query] executing statement s95 with parameters: []
[2022-03-20T20:22:05Z INFO  ats_monitoring::psql::postgresql] Запись в табл. события_авр: Генератор в режиме трансляции питания от электросети работает исправно.
[2022-03-20T20:22:05Z DEBUG tokio_postgres::prepare] preparing query s96: INSERT INTO журнал_работы_приложения (событие) VALUES ($1)
[2022-03-20T20:22:05Z DEBUG tokio_postgres::prepare] preparing query s97: INSERT INTO журнал_работы_приложения (событие) VALUES ($1)
[2022-03-20T20:22:05Z DEBUG tokio_postgres::query] executing statement s96 with parameters: ["Питание от электросети есть."]
[2022-03-20T20:22:05Z DEBUG tokio_postgres::query] executing statement s97 with parameters: ["Генератор в режиме трансляции питания от электросети работает исправно."]
[2022-03-20T20:22:05Z DEBUG tokio_postgres::prepare] preparing query s98: SELECT событие, время_и_дата FROM журнал_работы_приложения ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:22:05Z DEBUG tokio_postgres::query] executing statement s98 with parameters: []
[2022-03-20T20:22:05Z DEBUG tokio_postgres::prepare] preparing query s99: SELECT событие, время_и_дата FROM журнал_работы_приложения ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:22:05Z INFO  ats_monitoring::psql::postgresql] Запись в табл. журнал_работы_приложения: Питание от электросети есть.
[2022-03-20T20:22:05Z DEBUG tokio_postgres::query] executing statement s99 with parameters: []
[2022-03-20T20:22:05Z INFO  ats_monitoring::psql::postgresql] Запись в табл. журнал_работы_приложения: Генератор в режиме трансляции питания от электросети работает исправно.
[2022-03-20T20:22:05Z INFO  ats_monitoring] starting up write_data_to_ram_spawn
[2022-03-20T20:22:05Z DEBUG tokio_postgres::prepare] preparing query s100: SELECT EXTRACT(epoch FROM mark) FROM avr_control_insert ORDER BY mark DESC limit 1
[2022-03-20T20:22:05Z DEBUG tokio_postgres::query] executing statement s100 with parameters: []
[2022-03-20T20:22:05Z INFO  ats_monitoring::ram::db] Time (unix) of the last entry in a table 'avr_control_insert': Postgres = 1647807722.482174, Skytable = 1647273642.663296
[2022-03-20T20:22:05Z DEBUG tokio_postgres::prepare] preparing query s101: SELECT EXTRACT(epoch FROM now()) FROM avr_control_insert ORDER BY now() DESC limit 1
[2022-03-20T20:22:05Z DEBUG tokio_postgres::query] executing statement s101 with parameters: []
[2022-03-20T20:22:05Z INFO  ats_monitoring::ram::db] Time (unix) now: PostgreSQL = 1647807725.847603, Skytable = 1647273645.505613
[2022-03-20T20:22:05Z DEBUG tokio_postgres::prepare] preparing query s102: SELECT mark, connection FROM avr_control_insert ORDER BY mark DESC limit 1
[2022-03-20T20:22:05Z DEBUG tokio_postgres::query] executing statement s102 with parameters: []
[2022-03-20T20:22:05Z INFO  ats_monitoring::ram::db] Latest value of plc_connect: PostgreSQL = 1, Skytable = 1
[2022-03-20T20:22:05Z DEBUG tokio_postgres::prepare] preparing query s103: SELECT mark, generator_faulty FROM avr_control_insert ORDER BY mark DESC limit 1
[2022-03-20T20:22:05Z DEBUG tokio_postgres::query] executing statement s103 with parameters: []
[2022-03-20T20:22:05Z INFO  ats_monitoring::ram::db] Latest value of generator_faulty: PostgreSQL = 0, Skytable = 0
[2022-03-20T20:22:05Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR generator_work: [0]
[2022-03-20T20:22:05Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR connection: [1]
[2022-03-20T20:22:06Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR load: [0]
[2022-03-20T20:22:06Z DEBUG tokio_postgres::prepare] preparing query s104: INSERT INTO avr_control_insert (mains_power_supply, start_generator, generator_faulty, generator_work, connection) VALUES ($1, $2, $3, $4, $5)
[2022-03-20T20:22:06Z DEBUG tokio_postgres::query] executing statement s104 with parameters: [0, 0, 0, 0, 1]
[2022-03-20T20:22:06Z DEBUG tokio_postgres::prepare] preparing query s105: SELECT mains_power_supply, start_generator, generator_faulty, generator_work, connection FROM avr_control_insert ORDER BY mark DESC limit 1
[2022-03-20T20:22:06Z DEBUG tokio_postgres::query] executing statement s105 with parameters: []
[2022-03-20T20:22:06Z INFO  ats_monitoring::modbus_ats::avr_control] Считаны из ПЛК и записаны в табл. avr_control_insert следующие значения: mains_power_supply: 0, start_generator: 0, generator_faulty: 0, generator_work: 0, connection: 1
[2022-03-20T20:22:06Z DEBUG tokio_postgres::prepare] preparing query s106: INSERT INTO нагрузка_на_генератор (нагрузка) VALUES ($1)
[2022-03-20T20:22:06Z DEBUG tokio_postgres::query] executing statement s106 with parameters: [0]
[2022-03-20T20:22:06Z DEBUG tokio_postgres::prepare] preparing query s107: SELECT нагрузка FROM нагрузка_на_генератор ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:22:06Z DEBUG tokio_postgres::query] executing statement s107 with parameters: []
[2022-03-20T20:22:06Z INFO  ats_monitoring::modbus_ats::avr_control] Считаны из ПЛК и записаны в табл. нагрузка_на_генератор следующие значения: load: 0
[2022-03-20T20:22:07Z INFO  ats_monitoring] starting up modbus_winter_garden_spawn
[2022-03-20T20:22:07Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Связь ПЛК с модулем modbus_winter_garden: Ok
[2022-03-20T20:22:07Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR phyto_lighting_1: [0]
[2022-03-20T20:22:07Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR phyto_lighting_2: [0]
[2022-03-20T20:22:08Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR phyto_lighting_3: [0]
[2022-03-20T20:22:08Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR phyto_lighting_4: [0]
[2022-03-20T20:22:08Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR fan: [0]
[2022-03-20T20:22:08Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR automatic_watering_1: [0]
[2022-03-20T20:22:08Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR automatic_watering_2: [0]
[2022-03-20T20:22:08Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR automatic_watering_3: [0]
[2022-03-20T20:22:08Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR temperature_indoor: [22]
[2022-03-20T20:22:08Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR humidity_indoor: [20]
[2022-03-20T20:22:08Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR illumination_indoor: [11]
[2022-03-20T20:22:08Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR illumination_outdoor: [65363]
[2022-03-20T20:22:08Z INFO  ats_monitoring] starting up power_supply_monitoring_spawn
[2022-03-20T20:22:08Z INFO  ats_monitoring] starting up generator_monitoring_spawn
[2022-03-20T20:22:08Z INFO  ats_monitoring::power_supply_monitoring::power_supply] Запрос наличия питания от электросети
[2022-03-20T20:22:08Z INFO  ats_monitoring::generator_monitoring::generator] Запрос работоспособности генератора в режиме трансляции питания от электросети
[2022-03-20T20:22:08Z INFO  ats_monitoring::power_supply_monitoring::power_supply] response from PostgreSQL: mains_power_supply = 2
[2022-03-20T20:22:08Z INFO  ats_monitoring::generator_monitoring::generator] response from PostgreSQL: generator_faulty = 0
[2022-03-20T20:22:08Z INFO  ats_monitoring::power_supply_monitoring::power_supply] Питание от электросети есть
[2022-03-20T20:22:08Z INFO  ats_monitoring::generator_monitoring::generator] Генератор в режиме трансляции питания от электросети работает исправно
[2022-03-20T20:22:08Z DEBUG tokio_postgres::prepare] preparing query s108: INSERT INTO события_авр (событие) VALUES ($1)
[2022-03-20T20:22:08Z DEBUG tokio_postgres::prepare] preparing query s109: INSERT INTO события_авр (событие) VALUES ($1)
[2022-03-20T20:22:08Z DEBUG tokio_postgres::query] executing statement s108 with parameters: ["Питание от электросети есть."]
[2022-03-20T20:22:08Z DEBUG tokio_postgres::query] executing statement s109 with parameters: ["Генератор в режиме трансляции питания от электросети работает исправно."]
[2022-03-20T20:22:08Z DEBUG tokio_postgres::prepare] preparing query s110: SELECT событие, время_и_дата FROM события_авр ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:22:08Z DEBUG tokio_postgres::query] executing statement s110 with parameters: []
[2022-03-20T20:22:08Z DEBUG tokio_postgres::prepare] preparing query s111: SELECT событие, время_и_дата FROM события_авр ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:22:08Z DEBUG tokio_postgres::query] executing statement s111 with parameters: []
[2022-03-20T20:22:08Z INFO  ats_monitoring::psql::postgresql] Запись в табл. события_авр: Генератор в режиме трансляции питания от электросети работает исправно.
[2022-03-20T20:22:08Z INFO  ats_monitoring::psql::postgresql] Запись в табл. события_авр: Генератор в режиме трансляции питания от электросети работает исправно.
[2022-03-20T20:22:08Z DEBUG tokio_postgres::prepare] preparing query s112: INSERT INTO журнал_работы_приложения (событие) VALUES ($1)
[2022-03-20T20:22:08Z DEBUG tokio_postgres::prepare] preparing query s113: INSERT INTO журнал_работы_приложения (событие) VALUES ($1)
[2022-03-20T20:22:08Z DEBUG tokio_postgres::query] executing statement s112 with parameters: ["Питание от электросети есть."]
[2022-03-20T20:22:08Z DEBUG tokio_postgres::query] executing statement s113 with parameters: ["Генератор в режиме трансляции питания от электросети работает исправно."]
[2022-03-20T20:22:08Z DEBUG tokio_postgres::prepare] preparing query s114: SELECT событие, время_и_дата FROM журнал_работы_приложения ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:22:08Z DEBUG tokio_postgres::prepare] preparing query s115: SELECT событие, время_и_дата FROM журнал_работы_приложения ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:22:08Z DEBUG tokio_postgres::query] executing statement s114 with parameters: []
[2022-03-20T20:22:08Z DEBUG tokio_postgres::query] executing statement s115 with parameters: []
[2022-03-20T20:22:08Z INFO  ats_monitoring::psql::postgresql] Запись в табл. журнал_работы_приложения: Генератор в режиме трансляции питания от электросети работает исправно.
[2022-03-20T20:22:08Z INFO  ats_monitoring::psql::postgresql] Запись в табл. журнал_работы_приложения: Генератор в режиме трансляции питания от электросети работает исправно.
[2022-03-20T20:22:08Z INFO  ats_monitoring] starting up write_data_to_ram_spawn
[2022-03-20T20:22:08Z DEBUG tokio_postgres::prepare] preparing query s116: SELECT EXTRACT(epoch FROM mark) FROM avr_control_insert ORDER BY mark DESC limit 1
[2022-03-20T20:22:08Z DEBUG tokio_postgres::query] executing statement s116 with parameters: []
[2022-03-20T20:22:08Z INFO  ats_monitoring::ram::db] Time (unix) of the last entry in a table 'avr_control_insert': Postgres = 1647807726.057317, Skytable = 1647273642.663296
[2022-03-20T20:22:08Z DEBUG tokio_postgres::prepare] preparing query s117: SELECT EXTRACT(epoch FROM now()) FROM avr_control_insert ORDER BY now() DESC limit 1
[2022-03-20T20:22:08Z DEBUG tokio_postgres::query] executing statement s117 with parameters: []
[2022-03-20T20:22:08Z INFO  ats_monitoring::ram::db] Time (unix) now: PostgreSQL = 1647807728.893547, Skytable = 1647273645.505613
[2022-03-20T20:22:08Z DEBUG tokio_postgres::prepare] preparing query s118: SELECT mark, connection FROM avr_control_insert ORDER BY mark DESC limit 1
[2022-03-20T20:22:08Z DEBUG tokio_postgres::query] executing statement s118 with parameters: []
[2022-03-20T20:22:08Z INFO  ats_monitoring::ram::db] Latest value of plc_connect: PostgreSQL = 1, Skytable = 1
[2022-03-20T20:22:08Z DEBUG tokio_postgres::prepare] preparing query s119: SELECT mark, generator_faulty FROM avr_control_insert ORDER BY mark DESC limit 1
[2022-03-20T20:22:08Z DEBUG tokio_postgres::query] executing statement s119 with parameters: []
[2022-03-20T20:22:08Z INFO  ats_monitoring::ram::db] Latest value of generator_faulty: PostgreSQL = 0, Skytable = 0
[2022-03-20T20:22:09Z INFO  ats_monitoring] starting up modbus_ats_spawn
[2022-03-20T20:22:09Z INFO  ats_monitoring::modbus_ats::avr_control] Связь ПЛК с модулем modbus_ats: Ok
[2022-03-20T20:22:09Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR mains_power_supply: [0]
[2022-03-20T20:22:09Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR start_generator: [0]
[2022-03-20T20:22:09Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR generator_faulty: [0]
[2022-03-20T20:22:09Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR generator_work: [0]
[2022-03-20T20:22:09Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR connection: [1]
[2022-03-20T20:22:09Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR load: [0]
[2022-03-20T20:22:09Z DEBUG tokio_postgres::prepare] preparing query s120: INSERT INTO avr_control_insert (mains_power_supply, start_generator, generator_faulty, generator_work, connection) VALUES ($1, $2, $3, $4, $5)
[2022-03-20T20:22:09Z DEBUG tokio_postgres::query] executing statement s120 with parameters: [0, 0, 0, 0, 1]
[2022-03-20T20:22:09Z DEBUG tokio_postgres::prepare] preparing query s121: SELECT mains_power_supply, start_generator, generator_faulty, generator_work, connection FROM avr_control_insert ORDER BY mark DESC limit 1
[2022-03-20T20:22:09Z DEBUG tokio_postgres::query] executing statement s121 with parameters: []
[2022-03-20T20:22:09Z INFO  ats_monitoring::modbus_ats::avr_control] Считаны из ПЛК и записаны в табл. avr_control_insert следующие значения: mains_power_supply: 0, start_generator: 0, generator_faulty: 0, generator_work: 0, connection: 1
[2022-03-20T20:22:09Z DEBUG tokio_postgres::prepare] preparing query s122: INSERT INTO нагрузка_на_генератор (нагрузка) VALUES ($1)
[2022-03-20T20:22:09Z DEBUG tokio_postgres::query] executing statement s122 with parameters: [0]
[2022-03-20T20:22:09Z DEBUG tokio_postgres::prepare] preparing query s123: SELECT нагрузка FROM нагрузка_на_генератор ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:22:09Z DEBUG tokio_postgres::query] executing statement s123 with parameters: []
[2022-03-20T20:22:09Z INFO  ats_monitoring::modbus_ats::avr_control] Считаны из ПЛК и записаны в табл. нагрузка_на_генератор следующие значения: load: 0
[2022-03-20T20:22:11Z INFO  ats_monitoring] starting up modbus_winter_garden_spawn
[2022-03-20T20:22:11Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Связь ПЛК с модулем modbus_winter_garden: Ok
[2022-03-20T20:22:11Z INFO  ats_monitoring] starting up power_supply_monitoring_spawn
[2022-03-20T20:22:11Z INFO  ats_monitoring] starting up generator_monitoring_spawn
[2022-03-20T20:22:11Z INFO  ats_monitoring::power_supply_monitoring::power_supply] Запрос наличия питания от электросети
[2022-03-20T20:22:11Z INFO  ats_monitoring::generator_monitoring::generator] Запрос работоспособности генератора в режиме трансляции питания от электросети
[2022-03-20T20:22:11Z INFO  ats_monitoring::power_supply_monitoring::power_supply] response from PostgreSQL: mains_power_supply = 2
[2022-03-20T20:22:11Z INFO  ats_monitoring::generator_monitoring::generator] response from PostgreSQL: generator_faulty = 0
[2022-03-20T20:22:11Z INFO  ats_monitoring::power_supply_monitoring::power_supply] Питание от электросети есть
[2022-03-20T20:22:11Z INFO  ats_monitoring::generator_monitoring::generator] Генератор в режиме трансляции питания от электросети работает исправно
[2022-03-20T20:22:11Z DEBUG tokio_postgres::prepare] preparing query s124: INSERT INTO события_авр (событие) VALUES ($1)
[2022-03-20T20:22:11Z DEBUG tokio_postgres::prepare] preparing query s125: INSERT INTO события_авр (событие) VALUES ($1)
[2022-03-20T20:22:11Z DEBUG tokio_postgres::query] executing statement s124 with parameters: ["Питание от электросети есть."]
[2022-03-20T20:22:11Z DEBUG tokio_postgres::query] executing statement s125 with parameters: ["Генератор в режиме трансляции питания от электросети работает исправно."]
[2022-03-20T20:22:11Z DEBUG tokio_postgres::prepare] preparing query s126: SELECT событие, время_и_дата FROM события_авр ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:22:11Z DEBUG tokio_postgres::prepare] preparing query s127: SELECT событие, время_и_дата FROM события_авр ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:22:11Z DEBUG tokio_postgres::query] executing statement s126 with parameters: []
[2022-03-20T20:22:11Z DEBUG tokio_postgres::query] executing statement s127 with parameters: []
[2022-03-20T20:22:11Z INFO  ats_monitoring::psql::postgresql] Запись в табл. события_авр: Генератор в режиме трансляции питания от электросети работает исправно.
[2022-03-20T20:22:11Z INFO  ats_monitoring::psql::postgresql] Запись в табл. события_авр: Генератор в режиме трансляции питания от электросети работает исправно.
[2022-03-20T20:22:11Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR phyto_lighting_1: [0]
[2022-03-20T20:22:11Z DEBUG tokio_postgres::prepare] preparing query s128: INSERT INTO журнал_работы_приложения (событие) VALUES ($1)
[2022-03-20T20:22:11Z DEBUG tokio_postgres::prepare] preparing query s129: INSERT INTO журнал_работы_приложения (событие) VALUES ($1)
[2022-03-20T20:22:11Z DEBUG tokio_postgres::query] executing statement s129 with parameters: ["Генератор в режиме трансляции питания от электросети работает исправно."]
[2022-03-20T20:22:11Z DEBUG tokio_postgres::query] executing statement s128 with parameters: ["Питание от электросети есть."]
[2022-03-20T20:22:11Z DEBUG tokio_postgres::prepare] preparing query s130: SELECT событие, время_и_дата FROM журнал_работы_приложения ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:22:11Z DEBUG tokio_postgres::prepare] preparing query s131: SELECT событие, время_и_дата FROM журнал_работы_приложения ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:22:11Z DEBUG tokio_postgres::query] executing statement s130 with parameters: []
[2022-03-20T20:22:11Z DEBUG tokio_postgres::query] executing statement s131 with parameters: []
[2022-03-20T20:22:11Z INFO  ats_monitoring::psql::postgresql] Запись в табл. журнал_работы_приложения: Питание от электросети есть.
[2022-03-20T20:22:11Z INFO  ats_monitoring::psql::postgresql] Запись в табл. журнал_работы_приложения: Питание от электросети есть.
[2022-03-20T20:22:11Z INFO  ats_monitoring] starting up write_data_to_ram_spawn
[2022-03-20T20:22:11Z DEBUG tokio_postgres::prepare] preparing query s132: SELECT EXTRACT(epoch FROM mark) FROM avr_control_insert ORDER BY mark DESC limit 1
[2022-03-20T20:22:11Z DEBUG tokio_postgres::query] executing statement s132 with parameters: []
[2022-03-20T20:22:11Z INFO  ats_monitoring::ram::db] Time (unix) of the last entry in a table 'avr_control_insert': Postgres = 1647807729.603869, Skytable = 1647273642.663296
[2022-03-20T20:22:11Z DEBUG tokio_postgres::prepare] preparing query s133: SELECT EXTRACT(epoch FROM now()) FROM avr_control_insert ORDER BY now() DESC limit 1
[2022-03-20T20:22:11Z DEBUG tokio_postgres::query] executing statement s133 with parameters: []
[2022-03-20T20:22:11Z INFO  ats_monitoring::ram::db] Time (unix) now: PostgreSQL = 1647807731.932108, Skytable = 1647273645.505613
[2022-03-20T20:22:11Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR phyto_lighting_2: [0]
[2022-03-20T20:22:11Z DEBUG tokio_postgres::prepare] preparing query s134: SELECT mark, connection FROM avr_control_insert ORDER BY mark DESC limit 1
[2022-03-20T20:22:11Z DEBUG tokio_postgres::query] executing statement s134 with parameters: []
[2022-03-20T20:22:11Z INFO  ats_monitoring::ram::db] Latest value of plc_connect: PostgreSQL = 1, Skytable = 1
[2022-03-20T20:22:11Z DEBUG tokio_postgres::prepare] preparing query s135: SELECT mark, generator_faulty FROM avr_control_insert ORDER BY mark DESC limit 1
[2022-03-20T20:22:11Z DEBUG tokio_postgres::query] executing statement s135 with parameters: []
[2022-03-20T20:22:11Z INFO  ats_monitoring::ram::db] Latest value of generator_faulty: PostgreSQL = 0, Skytable = 0
[2022-03-20T20:22:12Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR phyto_lighting_3: [0]
[2022-03-20T20:22:12Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR phyto_lighting_4: [0]
[2022-03-20T20:22:12Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR fan: [0]
[2022-03-20T20:22:12Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR automatic_watering_1: [0]
[2022-03-20T20:22:12Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR automatic_watering_2: [0]
[2022-03-20T20:22:12Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR automatic_watering_3: [0]
[2022-03-20T20:22:12Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR temperature_indoor: [22]
[2022-03-20T20:22:12Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR humidity_indoor: [20]
[2022-03-20T20:22:12Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR illumination_indoor: [14]
[2022-03-20T20:22:12Z INFO  ats_monitoring] starting up modbus_ats_spawn
[2022-03-20T20:22:12Z INFO  ats_monitoring::modbus_winter_garden::winter_garden] Response IR illumination_outdoor: [65359]
[2022-03-20T20:22:12Z INFO  ats_monitoring::modbus_ats::avr_control] Связь ПЛК с модулем modbus_ats: Ok
[2022-03-20T20:22:12Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR mains_power_supply: [0]
[2022-03-20T20:22:12Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR start_generator: [0]
[2022-03-20T20:22:12Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR generator_faulty: [0]
[2022-03-20T20:22:12Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR generator_work: [0]
[2022-03-20T20:22:13Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR connection: [1]
[2022-03-20T20:22:13Z INFO  ats_monitoring::modbus_ats::avr_control] Response IR load: [0]
[2022-03-20T20:22:13Z DEBUG tokio_postgres::prepare] preparing query s136: INSERT INTO avr_control_insert (mains_power_supply, start_generator, generator_faulty, generator_work, connection) VALUES ($1, $2, $3, $4, $5)
[2022-03-20T20:22:13Z DEBUG tokio_postgres::query] executing statement s136 with parameters: [0, 0, 0, 0, 1]
[2022-03-20T20:22:13Z DEBUG tokio_postgres::prepare] preparing query s137: SELECT mains_power_supply, start_generator, generator_faulty, generator_work, connection FROM avr_control_insert ORDER BY mark DESC limit 1
[2022-03-20T20:22:13Z DEBUG tokio_postgres::query] executing statement s137 with parameters: []
[2022-03-20T20:22:13Z INFO  ats_monitoring::modbus_ats::avr_control] Считаны из ПЛК и записаны в табл. avr_control_insert следующие значения: mains_power_supply: 0, start_generator: 0, generator_faulty: 0, generator_work: 0, connection: 1
[2022-03-20T20:22:13Z DEBUG tokio_postgres::prepare] preparing query s138: INSERT INTO нагрузка_на_генератор (нагрузка) VALUES ($1)
[2022-03-20T20:22:13Z DEBUG tokio_postgres::query] executing statement s138 with parameters: [0]
[2022-03-20T20:22:13Z DEBUG tokio_postgres::prepare] preparing query s139: SELECT нагрузка FROM нагрузка_на_генератор ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:22:13Z DEBUG tokio_postgres::query] executing statement s139 with parameters: []
[2022-03-20T20:22:13Z INFO  ats_monitoring::modbus_ats::avr_control] Считаны из ПЛК и записаны в табл. нагрузка_на_генератор следующие значения: load: 0
[2022-03-20T20:22:14Z INFO  ats_monitoring] starting up power_supply_monitoring_spawn
[2022-03-20T20:22:14Z INFO  ats_monitoring] starting up generator_monitoring_spawn
[2022-03-20T20:22:14Z INFO  ats_monitoring::power_supply_monitoring::power_supply] Запрос наличия питания от электросети
[2022-03-20T20:22:14Z INFO  ats_monitoring::generator_monitoring::generator] Запрос работоспособности генератора в режиме трансляции питания от электросети
[2022-03-20T20:22:14Z INFO  ats_monitoring::power_supply_monitoring::power_supply] response from PostgreSQL: mains_power_supply = 2
[2022-03-20T20:22:14Z INFO  ats_monitoring::generator_monitoring::generator] response from PostgreSQL: generator_faulty = 0
[2022-03-20T20:22:14Z INFO  ats_monitoring::power_supply_monitoring::power_supply] Питание от электросети есть
[2022-03-20T20:22:14Z INFO  ats_monitoring::generator_monitoring::generator] Генератор в режиме трансляции питания от электросети работает исправно
[2022-03-20T20:22:14Z DEBUG tokio_postgres::prepare] preparing query s140: INSERT INTO события_авр (событие) VALUES ($1)
[2022-03-20T20:22:14Z DEBUG tokio_postgres::prepare] preparing query s141: INSERT INTO события_авр (событие) VALUES ($1)
[2022-03-20T20:22:14Z DEBUG tokio_postgres::query] executing statement s140 with parameters: ["Питание от электросети есть."]
[2022-03-20T20:22:14Z DEBUG tokio_postgres::query] executing statement s141 with parameters: ["Генератор в режиме трансляции питания от электросети работает исправно."]
[2022-03-20T20:22:14Z DEBUG tokio_postgres::prepare] preparing query s142: SELECT событие, время_и_дата FROM события_авр ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:22:14Z DEBUG tokio_postgres::prepare] preparing query s143: SELECT событие, время_и_дата FROM события_авр ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:22:14Z DEBUG tokio_postgres::query] executing statement s142 with parameters: []
[2022-03-20T20:22:14Z DEBUG tokio_postgres::query] executing statement s143 with parameters: []
[2022-03-20T20:22:14Z INFO  ats_monitoring::psql::postgresql] Запись в табл. события_авр: Генератор в режиме трансляции питания от электросети работает исправно.
[2022-03-20T20:22:14Z INFO  ats_monitoring::psql::postgresql] Запись в табл. события_авр: Генератор в режиме трансляции питания от электросети работает исправно.
[2022-03-20T20:22:14Z DEBUG tokio_postgres::prepare] preparing query s144: INSERT INTO журнал_работы_приложения (событие) VALUES ($1)
[2022-03-20T20:22:14Z DEBUG tokio_postgres::prepare] preparing query s145: INSERT INTO журнал_работы_приложения (событие) VALUES ($1)
[2022-03-20T20:22:14Z DEBUG tokio_postgres::query] executing statement s144 with parameters: ["Питание от электросети есть."]
[2022-03-20T20:22:14Z DEBUG tokio_postgres::query] executing statement s145 with parameters: ["Генератор в режиме трансляции питания от электросети работает исправно."]
[2022-03-20T20:22:14Z DEBUG tokio_postgres::prepare] preparing query s146: SELECT событие, время_и_дата FROM журнал_работы_приложения ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:22:14Z DEBUG tokio_postgres::prepare] preparing query s147: SELECT событие, время_и_дата FROM журнал_работы_приложения ORDER BY время_и_дата DESC limit 1
[2022-03-20T20:22:14Z DEBUG tokio_postgres::query] executing statement s146 with parameters: []
[2022-03-20T20:22:14Z DEBUG tokio_postgres::query] executing statement s147 with parameters: []
[2022-03-20T20:22:14Z INFO  ats_monitoring::psql::postgresql] Запись в табл. журнал_работы_приложения: Генератор в режиме трансляции питания от электросети работает исправно.
[2022-03-20T20:22:14Z INFO  ats_monitoring::psql::postgresql] Запись в табл. журнал_работы_приложения: Генератор в режиме трансляции питания от электросети работает исправно.
[2022-03-20T20:22:14Z INFO  ats_monitoring] starting up write_data_to_ram_spawn
[2022-03-20T20:22:14Z DEBUG tokio_postgres::prepare] preparing query s148: SELECT EXTRACT(epoch FROM mark) FROM avr_control_insert ORDER BY mark DESC limit 1
[2022-03-20T20:22:14Z DEBUG tokio_postgres::query] executing statement s148 with parameters: []
[2022-03-20T20:22:14Z INFO  ats_monitoring::ram::db] Time (unix) of the last entry in a table 'avr_control_insert': Postgres = 1647807733.13434, Skytable = 1647273642.663296
[2022-03-20T20:22:14Z DEBUG tokio_postgres::prepare] preparing query s149: SELECT EXTRACT(epoch FROM now()) FROM avr_control_insert ORDER BY now() DESC limit 1
[2022-03-20T20:22:14Z DEBUG tokio_postgres::query] executing statement s149 with parameters: []
[2022-03-20T20:22:14Z INFO  ats_monitoring::ram::db] Time (unix) now: PostgreSQL = 1647807734.962572, Skytable = 1647273645.505613
[2022-03-20T20:22:14Z DEBUG tokio_postgres::prepare] preparing query s150: SELECT mark, connection FROM avr_control_insert ORDER BY mark DESC limit 1
[2022-03-20T20:22:14Z DEBUG tokio_postgres::query] executing statement s150 with parameters: []
[2022-03-20T20:22:14Z INFO  ats_monitoring::ram::db] Latest value of plc_connect: PostgreSQL = 1, Skytable = 1
[2022-03-20T20:22:14Z DEBUG tokio_postgres::prepare] preparing query s151: SELECT mark, generator_faulty FROM avr_control_insert ORDER BY mark DESC limit 1
[2022-03-20T20:22:14Z DEBUG tokio_postgres::query] executing statement s151 with parameters: []
[2022-03-20T20:22:14Z INFO  ats_monitoring::ram::db] Latest value of generator_faulty: PostgreSQL = 0, Skytable = 0
[2022-03-20T20:22:15Z INFO  ats_monitoring] starting up modbus_winter_garden_spawn
[2022-03-20T20:22:16Z INFO  ats_monitoring] starting up modbus_ats_spawn
